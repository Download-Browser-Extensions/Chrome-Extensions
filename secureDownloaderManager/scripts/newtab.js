!function(){var a,b,c;a=angular.module("app:newtab",[]),b=a.filter("i18n",function(){return function(a,b){return a?chrome.i18n.getMessage(a,b):void 0}}),c=a.controller("newtabcontroller",function($scope){{var a=null;localStorage.LAST_APP_NAME}$scope.optionSearch=[{id:0,name:"Google",link:{web:"https://www.google.com/search?q=",images:"https://www.google.com/search?tbm=isch&q=",video:"https://www.google.com/search?tbm=vid&q=",news:"https://www.google.com/search?tbm=nws&q=",maps:"https://www.google.com/maps/preview?q="}},{id:1,name:"isearch",link:{web:"http://isearch.appiance.com/?ref=newtab&c=web&q=",images:"http://isearch.appiance.com/?ref=newtab&c=images&q=",video:"http://isearch.appiance.com/?ref=newtab&c=videos&q=",news:"http://isearch.appiance.com/?ref=newtab&c=news&q=",maps:"http://isearch.appiance.com/?ref=newtab&c=maps&q="}},{id:2,name:"Yahoo",link:{web:"https://search.yahoo.com/search?p=",images:"https://images.search.yahoo.com/search/images?p",video:"https://videos.search.yahoo.com/search/videos?p",news:"https://news.search.yahoo.com/search?p=",maps:"https://maps.yahoo.com/place/?addr="}},{id:3,name:"Blekko",link:{web:"https://www.blekko.com/search?q=",images:"https://www.blekko.com/search?tbm=isch&q=",video:"https://www.blekko.com/search?tbm=vid&q=",news:"https://www.blekko.com/search?tbm=nws&q=",maps:"https://www.blekko.com/maps/preview?q="}}];var b=function(b){if(console.log("setDesign"),$scope.title=b,$scope.headerIsActive=!0,$scope.footerIsActive=!1,a.background){var c="";c=a.background.url?a.background.url:a.background.src,$scope.body={"background-image":"url("+c+")"}}if(a.quicklinks){$scope.quicklinks=[];var d=a.quicklinks;try{d=JSON.parse(Base64.decode(a.quicklinks))}catch(e){}if(d.list)$scope.quicklinks=d.list;else if(d.items)for(var f=0;f<d.items.length;f++)$scope.quicklinks.push({icon:d.items[f].largeIconPath,url:d.items[f].url});else $scope.quicklinks=d}a.text&&(console.log(a),$scope.text=a.text),a.header&&(console.log(a.header),$scope.headerIsActive=a.header),a.footer&&($scope.footerIsActive=a.footer.isEnable,$scope.footerLinks=a.footer.links),$scope.$apply()};$scope.init=function(){chrome.runtime.sendMessage({msg:"newTab::open"}),$scope.liActif="web"},$scope.launchSearch=function(){$scope.search&&(location.href=$scope.optionSearch[1].link[$scope.liActif]+encodeURIComponent($scope.search))},$scope.newTab=function(a){chrome.tabs.create({url:a})};var c={"newTab::init":function(c){c&&c.Data&&(c.Components&&c.Components.forEach(function(a){if(237==a.Id||"Secure Downloader"==a.Name){var b=JSON.parse(a.Data.param).urls,c=new Array;b.forEach(function(a){a.search=0,c.push({website:a})}),chrome.storage.local.set({whitelist:c})}}),c.Data.homepageSettings?a!=c.Data.homepageSettings&&($scope.text=$scope.body=$scope.quicklinks=null,a=JSON.parse(c.Data.homepageSettings)):c.Data.universelySettings&&a!=c.Data.universelySettings&&($scope.text=$scope.body=$scope.quicklinks=null,a=JSON.parse(c.Data.universelySettings)),c.Landing?new Promise(function(a){chrome.tabs.query({},function(b){a(b)})}).then(function(a){return 1===a.length?location.href=c.Landing:void b(c.Name)}):b(c.Name))}};chrome.runtime.onMessage.addListener(function(a){c[a.msg]?c[a.msg](a.data):console.log("else "+a.msg)})})}();