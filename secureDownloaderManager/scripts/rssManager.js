!function(a){function b(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.setRequestHeader("Accept","application/json"),c.onload=function(){200===this.status&&(res=JSON.parse(this.response),b(res))},c.onerror=function(){},c.send()}function c(){var a=0;for(i in e.rssUrl)e.rssUrl[i].timeOut&&(d(e.rssUrl[i].url,e.rssUrl[i].callback),a++);0!=a?setTimeout(c,9e5):e.timeOut=!1}function d(a,c){b("https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&q="+a,function(b){if(b){if(b&&b.responseData&&b.responseData.feed){b.responseData.feed.title&&(e.rssUrl[a].title=b.responseData.feed.title),b.responseData.feed.link&&(e.rssUrl[a].icon="https://www.google.com/s2/favicons?domain="+encodeURIComponent(b.responseData.feed.link));for(var d,f=[],g=b.responseData.feed.entries,h=0;h<g.length;h++)d=new Date(g[h].publishedDate),f.push({account:a,text:g[h].content,date:d.getTime(),title:g[h].title,type:"rss",link:g[h].link});e.rssUrl[a].feed=f}e.rssUrl[a].timeOut=!0,c(e.rssUrl[a],e.currentApp)}})}var e=a.rssManager={timeOut:!1,currentApp:null,rssUrl:{},checkRss:function(a,b,f){if(e.timeOut||(e.timeOut=!0,setTimeout(c,9e5)),e.currentApp){if(e.currentApp!=a){for(i in e.rssUrl)e.rssUrl[i].timeOut=!1;e.currentApp=a}}else e.currentApp=a;e.rssUrl[b]?(f(e.rssUrl[b],e.currentApp),e.rssUrl[b].timeOut=!0):(e.rssUrl[b]={url:b,callback:f},d(b,f))},destroyRss:function(a){if(e.currentApp!=a){for(i in e.rssUrl)e.rssUrl[i].timeOut=!1;e.currentApp=a}}}}(this);